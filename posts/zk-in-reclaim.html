<!DOCTYPE html><html lang="en" class="__variable_aaf875 __variable_11742b"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/3a8dc5763a8ae4b2-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/posts/28.jpg"/><link rel="stylesheet" href="/_next/static/css/af243d7f3466ae7c.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/c3620e9ca5613d68.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/5a2bc2e18c439204.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-cfbc00b856d4972e.js"/><script src="/_next/static/chunks/f14ca715-85481eca1e2aca4e.js" async=""></script><script src="/_next/static/chunks/465-4df10d5a859f0d9b.js" async=""></script><script src="/_next/static/chunks/main-app-274837eb7088a766.js" async=""></script><script src="/_next/static/chunks/618-9024f0767c532a66.js" async=""></script><script src="/_next/static/chunks/435-ef3d6ab01b87f570.js" async=""></script><script src="/_next/static/chunks/969-aad582b925652555.js" async=""></script><script src="/_next/static/chunks/808-a45f86db0de223fb.js" async=""></script><script src="/_next/static/chunks/app/layout-c515227871e7c234.js" async=""></script><script src="/_next/static/chunks/app/page-41b557df63454e1a.js" async=""></script><script src="/_next/static/chunks/app/posts/%5B...slug%5D/page-73618210e21bb040.js" async=""></script><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"/><title>ZK in Reclaim - an approximate explanation | Reclaim Protocol</title><meta name="description" content="Understanding ZK Proofs is not intuitive."/><meta name="author" content="hexclanlabs"/><meta property="og:title" content="ZK in Reclaim - an approximate explanation"/><meta property="og:description" content="Understanding ZK Proofs is not intuitive."/><meta property="og:url" content="https://example.com/posts/zk-in-reclaim"/><meta property="og:image" content="https://example.com/api/og?title=ZK+in+Reclaim+-+an+approximate+explanation"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:alt" content="ZK in Reclaim - an approximate explanation"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="ZK in Reclaim - an approximate explanation"/><meta name="twitter:description" content="Understanding ZK Proofs is not intuitive."/><meta name="twitter:image" content="https://example.com/api/og?title=ZK+in+Reclaim+-+an+approximate+explanation"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="antialiased text-gray-800 dark:bg-black dark:text-gray-400"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><nav class="container px-8 mx-auto max-w-screen-lg xl:px-5 py-6 lg:py-8"><div class="flex flex-wrap justify-between md:flex-nowrap md:gap-14"><div class="order-1 hidden w-full flex-col items-center justify-start md:order-none md:flex md:w-auto md:flex-1 md:flex-row md:justify-end"><a class="px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400" href="/">Home</a><a href="https://dev.reclaimprotocol.org/dashboard" target="_blank" rel="noopener noreferrer" class="px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400">Dashboard</a><a href="https://t.me/protocolreclaim" target="_blank" rel="noopener noreferrer" class="px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400">Community</a></div><div class="flex w-full items-center justify-between md:w-auto"><a href="/"><img alt="logo" loading="lazy" width="36" height="41" decoding="async" data-nimg="1" class="w-8 md:w-10" style="color:transparent" src="/_next/static/media/main.83eeff90.svg"/></a><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 py-2 w-10 px-0 sm:hidden" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R19ja:" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg><span class="sr-only">Toggle Mobile Nav</span></button></div><div class="order-2 hidden w-full flex-col items-center justify-start md:order-none md:flex md:w-auto md:flex-1 md:flex-row"><a class="px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400" href="/page/1">Blogs</a><a href="https://www.reclaimprotocol.org/whitepaper" target="_blank" rel="noopener noreferrer" class="px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400">Whitepaper</a><a href="https://docs.reclaimprotocol.org/" target="_blank" rel="noopener noreferrer" class="px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400">Docs</a></div></div></nav><main><article class="container py-6 prose dark:prose-invert max-w-3xl mx-auto"><h1 class="mb-2 text-center">ZK in Reclaim - an approximate explanation</h1><div class="text-center"><div>Madhavan Malolan</div><div>Jul 14, 2023</div></div><img src="/posts/28.jpg" alt="ZK in Reclaim - an approximate explanation" class="rounded" width="1920" height="1080"/><div class="flex gap-2 mb-2"><span class="inline-block text-xs font-medium tracking-wider uppercase mt-5 text-blue-600">Code</span><span class="inline-block text-xs font-medium tracking-wider uppercase mt-5 text-blue-600">Not Code</span></div><p>Understanding ZK Proofs is not intuitive. I’ve explained how Reclaim Works to over a dozen people spending several hours each, to distill what actually clicks - so that you don’t have to sit through one of those sessions filled with banging heads on to the table.</p>
<p><em>Note, this post deliberately provides incomplete or incorrect information - in the interest of appealing to intuition. For an accurate explanation refer the <a href="https://docs.reclaimprotocol.org/">whitepaper</a></em></p>
<h1 id="problem"><a class="subheading-anchor" aria-label="Link to section" href="#problem">Problem</a></h1>
<p>If we want to ask <em>Is the user above 18?</em>, in Reclaim it is translated to <em>Does the webpage of the govt ID when this user logged in contain the string “Age: 25”?</em>.</p>
<p>Given</p>
<ul>
<li>a website url, U</li>
<li>the encrypted html page, E (response to url U)</li>
<li>a set of signatures, S</li>
<li>the substring to look for, V</li>
<li>the decryption key, D</li>
</ul>
<p>We need to prove that</p>
<ol>
<li>When url U is opened, the response is E</li>
<li>E when decrypted with decryption key D, generates an intermediate plain text P</li>
<li>Plain text P has the substring V in it</li>
</ol>
<h1 id="background"><a class="subheading-anchor" aria-label="Link to section" href="#background">Background</a></h1>
<p>We can prove that opening url U, yields the response E that can be verified to be true using signatures S. You can refer to how that works <a href="https://blog.reclaimprotocol.org/posts/reclaim-works-on-tls-1-3/">here</a>. However, understanding how that works is not critical to understanding this post. All that you need to assume for this post is that that (U, E, S) is a public known tuple. We will understand how the ZK Proofs work given this public knowledge.</p>
<h1 id="naive-proof"><a class="subheading-anchor" aria-label="Link to section" href="#naive-proof">Naive proof</a></h1>
<p>Ok, now that we know (U, E, S) is immutable how may I prove to you that substring V exists in the encrypted html page E when decrypted with decryption key D?</p>
<p>Let’s say I give you a program <code>proof.py</code> with the following contents</p>
<figure data-rehype-pretty-code-figure=""><pre style="background-color:#24292e;color:#e1e4e8" tabindex="0" data-language="py" data-theme="github-dark"><code data-language="py" data-theme="github-dark" style="display:grid"><span data-line=""><span style="color:#F97583">def</span><span style="color:#B392F0"> verify</span><span style="color:#E1E4E8">(u, e, s, v, d):</span></span>
<span data-line=""><span style="color:#F97583">  assert</span><span style="color:#E1E4E8">(correct_response(u,e,s))</span></span>
<span data-line=""><span style="color:#E1E4E8">  p </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> decrypt(e, d)</span></span>
<span data-line=""><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> v </span><span style="color:#F97583">in</span><span style="color:#E1E4E8"> p</span></span></code></pre></figure>
<p>I will send you this function, and I will send you the parameters to run this function <code>U, E, S, V, D</code> You can</p>
<ol>
<li>see the source of the code and be convinced that this is what you want the code to be doing</li>
<li>when you run the code with the parameters I sent you, you get a boolean output</li>
</ol>
<p>If the output is <code>True</code>, you can be convinced that V is a substring of the decryption of E.</p>
<p>But, this relies on the fact that I reveal to you the decryption key D. Which is highly undesireable. OK, what can we do better? ZK Proofs? Yes, but let’s build to it.</p>
<h1 id="little-math"><a class="subheading-anchor" aria-label="Link to section" href="#little-math">Little Math?</a></h1>
<h2 id="binary-and-polynomials"><a class="subheading-anchor" aria-label="Link to section" href="#binary-and-polynomials">Binary and polynomials</a></h2>
<p>The program we saw above can be compiled into a binary. That is how it is executed. If it is converted into a binary, means the code turns into a bunch of 1s and 0s - that is, numbers. And numbers can be expressed as an equation or polynomial.</p>
<p>The way to convert this program into polynomials is called QAP and sliding in the assert functions is called R1CS - <a href="https://electriccoin.co/blog/snark-explain5/">if you want to read up more</a>. But, jargon aside - programs are nothing but mathematical equations.</p>
<p>This equation will check out, only if the variables U, E, S, V, D are the parameters fed in statically. So, from now on, we’ll refer to the program above as the equation Q.</p>
<h2 id="modulo-math"><a class="subheading-anchor" aria-label="Link to section" href="#modulo-math">Modulo math</a></h2>
<p><code>a % b</code> is read as <code>a mod b</code> represents the remainder when a is divided by b. There exists a problem called the <a href="https://www.doc.ic.ac.uk/~mrh/330tutor/ch06s02.html">Discrete Log Problem</a> in mathematics that says given <code>p^q % n</code> it is impossible to find <code>p</code> given <code>q</code> and <code>n</code>.</p>
<h1 id="homomorphic-encryption-ish"><a class="subheading-anchor" aria-label="Link to section" href="#homomorphic-encryption-ish">Homomorphic Encryption-ish</a></h1>
<p>This section has nothing to do with zk proofs that are used in the Reclaim Protocol. But I use it as a stepping stone to convince you that it is possible for me to prove that I know a D such that U, E, S, V, D satisfy Q; without revealing D to you.</p>
<pre><code>if a % n = (b*c) %n
also written as,
a = b*c % n

it is also true that
a^p = (b*c)^p % n

also,
a^p = (b^p * c^p) % n
</code></pre>
<p>See <a href="https://en.wikipedia.org/wiki/Homomorphic_encryption#Partially_homomorphic_cryptosystems">homomorphic encryption</a></p>
<p>In the above equation, i want to prove to you that i know a, b, c such that the equation <code>a = b*c %n</code> holds. But I don’t want to reveal c to you. So, what I’ll do is send you <code>a, b, cp, p</code> for some number <code>p</code>. I will compute <code>cp</code> to be <code>c^p</code>. I will send <code>cp</code> but never <code>c</code> itself.</p>
<p>What you can do is you can check if</p>
<pre><code>a^p = b^p * cp %n
</code></pre>
<p>If this equation holds, it also means <code>a = b*c %n</code> holds. The only way I was able to give you a <code>cp</code> that satisfied the equation when you raised <code>a</code> and <code>b</code> to the power <code>p</code> is if I actually knew <code>c</code> and raised it to <code>p</code> so as to calculate <code>cp</code> before sending it to you. As we saw above, because of the discrete log problem, it is impossible for you to derive c from cp.</p>
<p>Yay, so I have proven to you that i know value <code>c</code> such that it satisfies equation <code>a = b*c % n</code> given a, b, n, without revealing the value of <code>c</code> that I know. So, this is a zero knowledge proof. A zero knowledge proof is, there is no information other than what was being tried to be proven. Specifically I prove that I know <code>c</code> without revealing the value of `c.</p>
<p>So, we could use the same method to prove that I know D such that U, E, S, V, D satisfies Q - without revealing D itself. Right? Kinda. But it’d be too impractically expensive to do it this way especially when Q gets very very large for complex programs.</p>
<p>That’s why we need ZK SNARKs. the S in SNARK stands for succinct. So, it is designed to be cheap to share and verify.</p>
<h1 id="zk-snarks"><a class="subheading-anchor" aria-label="Link to section" href="#zk-snarks">ZK SNARKS</a></h1>
<h2 id="not-yet"><a class="subheading-anchor" aria-label="Link to section" href="#not-yet">Not yet…</a></h2>
<p>First we’re going to understad an interactive proof. More math incoming. We have the equation Q and known variables U, E, S, V and an unknown variable D that we want to prove the knowledge of. let us represent that as Q(U, E, S, V, d) or just Q(d) for short.</p>
<p>Q(d) can be written as</p>
<pre><code>Q(d^2) = A(d^2) + d*B(d^2)
</code></pre>
<p>The only way I can do this is if I know the factorization of Q. The only way for me to know the factorization of Q is if I know <code>D</code>. So if I can prove to you that I know the correct factorization - of Q, I have indirectly proven to you that I know D.</p>
<p>I will first commit to the polynomials Q, A, B. A commitment to a polynomial is the merkel root of the evaluation of the polynomial on all possible values of <code>d</code>. In practice, a <a href="https://www.iacr.org/archive/asiacrypt2010/6477178/6477178.pdf">more efficient commitment scheme</a> is used, but we’ll use this for simplicity. Once i have committed to these polynomials, I can’t go back and change the polynomials to my convenience in the rest of the proof generation.</p>
<p>Once i send you the commitments to Q, A, B ; you will send me a random number <code>r</code> I will construct a new equation</p>
<pre><code>H(d) = A(d) + r*B(d)
</code></pre>
<p>I will send you a commitment to this polynomial H back.</p>
<p>Ok, so at this point you have commitments to polynomials Q, A, B, H I have the secret decryption key, or number, D</p>
<p>Now you will send me 100 random values of <code>d</code></p>
<p>I will send you the merkel branches for each of Q, A, B, S when evaluated on these 100 values and 100 more branches for the squares of the values.</p>
<p>You will check that the merkel branches lead up to the committed merkel root, so I’ve definitely not changed my polynomials.</p>
<p>You will also check</p>
<pre><code>Q(x^2) = A(x^2) + x*B(x^2)
and
H(x) = A(x) + r*B(x)

for each of the 100 selected values of x
</code></pre>
<p>if this checks out you may have some confidence that I know the the correct factorization. But I might have gotten lucky inspite of me cheating in some way. So you’d tell me to do the entire thing again. But this time, you’d ask me to redo the entire thing, but this time replacing Q(d) with H(d).</p>
<p>So now,</p>
<pre><code>Q&#x27;(d^2) = A(d^2) + r*B(d^2)
and
H&#x27;(d) = A(d^2) + r&#x27;*r*B(d^2)
</code></pre>
<p>If you do this enough number of times, the probability of me getting lucky for every set of equations that are randomly generated via the randomly picked <code>r</code> is lower and lower. The intuition here for halving the power of <code>d</code> in each round is that the total size of the proof is only <code>log(degree of Q)</code> in size. Which is what makes it succinct. Ofcourse this is a <a href="https://vitalik.ca/general/2021/01/26/snarks.html">simplified version</a> of the actual protocol which has optimizations.</p>
<h2 id="non-interactive"><a class="subheading-anchor" aria-label="Link to section" href="#non-interactive">Non interactive</a></h2>
<p>The above protocol implies that both you and me have to be online at the same time for me to be able to generate the proofs. Because it involves you sending me random numbers and me doing the compute and sending it back. But that isn’t how zk proofs work - how?</p>
<p>The final trick we’re going to use is - called a fiat shamir heuristic. Instead of you picking the random number, I will pick the random number myself. But the way I would do it is just by hashing all the commitments I was making to you. that is, hash of the merkel roots of the polynomial commitments. It is random enough that i can’t predict it before making the commitment, so it is as good as you giving me this random number.</p>
<p>So, you are not required in the proof generation stage. I will generate all the random numbers and send that across to you. You can then check that I correctly derived the random numbers as per the agreed upon hash function. Along with, ofcourse, the checks you were doing in each round can now be done all at once on your end!</p>
<p>That is, you can verify the proof I’ve sent you. If the proof checks out, you’ll know that I know the factorization of Q which then implies that I know the value D that satisfied the equation and thus the computer program Q represents.</p>
<h2 id="is-this-secure"><a class="subheading-anchor" aria-label="Link to section" href="#is-this-secure">Is this secure?</a></h2>
<p>Remember, (U, E, S) is immutable because of the way in which the request is made. Which leaves me with only 2 variables to play with. <code>V</code> and <code>D</code>. Let’s say I want to create a zk proof for <code>V&#x27;</code> instead. That would mean, (U, E, S, V’) become fixed and the only free variable is <code>D</code>. So I now need to find a <code>D&#x27;</code> such that it still satisfies the equation <code>Q</code>. And that, is impossible because the only way is to try all the possible values of D, which is 2^64 values. It’ll take millions of years to try out all the values of D on the most powerful computer to find a value of D so that it checks out for the particular <code>V&#x27;</code> you want to prove.</p>
<p>Phew.</p>
<p><em>Reminder, this post is grossly inaccurate in terms of what actually happens. It is meant only to appeal to intuition.</em></p></article></main><div class="container px-8 mx-auto xl:px-5  max-w-screen-lg py-5 lg:py-8 mt-10 border-t border-gray-100 dark:border-gray-800"><div class="text-center text-sm">Copyright © <!-- -->2024<!-- --> Reclaim Protocol. All rights reserved.</div><div class="mt-2 flex items-center justify-center"><div class="inline-flex items-center"><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 false border border-slate-200" type="button" id="radix-:Rbja:" aria-haspopup="menu" aria-expanded="false" data-state="closed"><span class="block dark:hidden">Light</span><span class="hidden dark:block">Dark</span><span class="sr-only">Toggle Theme</span></button></div></div></div><script src="/_next/static/chunks/webpack-cfbc00b856d4972e.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/3a8dc5763a8ae4b2-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/css/af243d7f3466ae7c.css\",\"style\"]\n4:HL[\"/_next/static/css/c3620e9ca5613d68.css\",\"style\"]\n5:HL[\"/_next/static/css/5a2bc2e18c439204.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"6:I[5726,[],\"\"]\n9:I[1699,[],\"\"]\nb:I[2579,[],\"\"]\nc:I[1425,[\"618\",\"static/chunks/618-9024f0767c532a66.js\",\"435\",\"static/chunks/435-ef3d6ab01b87f570.js\",\"969\",\"static/chunks/969-aad582b925652555.js\",\"808\",\"static/chunks/808-a45f86db0de223fb.js\",\"185\",\"static/chunks/app/layout-c515227871e7c234.js\"],\"Providers\"]\nd:I[9618,[\"618\",\"static/chunks/618-9024f0767c532a66.js\",\"931\",\"static/chunks/app/page-41b557df63454e1a.js\"],\"\"]\ne:I[5969,[\"969\",\"static/chunks/969-aad582b925652555.js\",\"49\",\"static/chunks/app/posts/%5B...slug%5D/page-73618210e21bb040.js\"],\"Image\"]\nf:I[845,[\"618\",\"static/chunks/618-9024f0767c532a66.js\",\"435\",\"static/chunks/435-ef3d6ab01b87f570.js\",\"969\",\"static/chunks/969-aad582b925652555.js\",\"808\",\"static/chunks/808-a45f86db0de223fb.js\",\"185\",\"static/chunks/app/layout-c515227871e7c234.js\"],\"MobileNav\"]\n10:I[3378,[\"618\",\"static/chunks/618-9024f0767c532a66.js\",\"435\",\"static/chunks/435-ef3d6ab01b87f570.js\",\"969\",\"static/chunks/969-aad582b925652555.js\",\"808\",\"static/chunks/808-a45f86db0de223fb.js\",\"185\",\"static/chunks/app/layout-c515227871e7c234.js\"],\"ModeToggle\"]\n12:I[3141,[],\"\"]\na:[\"slug\",\"zk-in-reclaim\",\"c\"]\n13:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/af243d7f3466ae7c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c3620e9ca5613d68.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L6\",null,{\"buildId\":\"KOC9BHodku9XeBBLWMxsr\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/zk-in-reclaim\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"zk-in-reclaim\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"zk-in-reclaim\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"zk-in-reclaim\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L7\",\"$L8\"],null],null]},[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$a\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5a2bc2e18c439204.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"__variable_aaf875 __variable_11742b\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased text-gray-800 dark:bg-black dark:text-gray-400\",\"children\":[\"$\",\"$Lc\",null,{\"children\":[[\"$\",\"nav\",null,{\"className\":\"container px-8 mx-auto max-w-screen-lg xl:px-5 py-6 lg:py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-wrap justify-between md:flex-nowrap md:gap-14\",\"children\":[[\"$\",\"div\",null,{\"className\":\"order-1 hidden w-full flex-col items-center justify-start md:order-none md:flex md:w-auto md:flex-1 md:flex-row md:justify-end\",\"children\":[[\"$\",\"$Ld\",null,{\"href\":\"/\",\"className\":\"px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400\",\"children\":\"Home\"}],[\"$\",\"a\",null,{\"href\":\"https://dev.reclaimprotocol.org/dashboard\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400\",\"children\":\"Dashboard\"}],[\"$\",\"a\",null,{\"href\":\"https://t.me/protocolreclaim\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400\",\"children\":\"Community\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex w-full items-center justify-between md:w-auto\",\"children\":[[\"$\",\"$Ld\",null,{\"href\":\"/\",\"children\":[\"$\",\"$Le\",null,{\"src\":{\"src\":\"/_next/static/media/main.83eeff90.svg\",\"height\":41,\"width\":36,\"blurWidth\":0,\"blurHeight\":0},\"alt\":\"logo\",\"className\":\"w-8 md:w-10\"}]}],[\"$\",\"$Lf\",null,{}]]}],[\"$\",\"div\",null,{\"className\":\"order-2 hidden w-full flex-col items-center justify-start md:order-none md:flex md:w-auto md:flex-1 md:flex-row\",\"children\":[[\"$\",\"$Ld\",null,{\"href\":\"/page/1\",\"className\":\"px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400\",\"children\":\"Blogs\"}],[\"$\",\"a\",null,{\"href\":\"https://www.reclaimprotocol.org/whitepaper\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400\",\"children\":\"Whitepaper\"}],[\"$\",\"a\",null,{\"href\":\"https://docs.reclaimprotocol.org/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"px-5 py-2 text-base font-medium text-gray-600 hover:text-blue-500 dark:text-gray-400\",\"children\":\"Docs\"}]]}]]}]}],[\"$\",\"main\",null,{\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}],[\"$\",\"div\",null,{\"className\":\"container px-8 mx-auto xl:px-5  max-w-screen-lg py-5 lg:py-8 mt-10 border-t border-gray-100 dark:border-gray-800\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-center text-sm\",\"children\":[\"Copyright © \",2024,\" Reclaim Protocol. All rights reserved.\"]}],[\"$\",\"div\",null,{\"className\":\"mt-2 flex items-center justify-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"inline-flex items-center\",\"children\":[\"$\",\"$L10\",null,{}]}]}]]}]]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L11\"],\"globalErrorComponent\":\"$12\",\"missingSlots\":\"$W13\"}]]\n"])</script><script>self.__next_f.push([1,"8:[\"$\",\"article\",null,{\"className\":\"container py-6 prose dark:prose-invert max-w-3xl mx-auto\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-2 text-center\",\"children\":\"ZK in Reclaim - an approximate explanation\"}],[\"$\",\"div\",null,{\"className\":\"text-center\",\"children\":[[\"$\",\"div\",null,{\"children\":\"Madhavan Malolan\"}],[\"$\",\"div\",null,{\"children\":\"Jul 14, 2023\"}]]}],[\"$\",\"img\",null,{\"src\":\"/posts/28.jpg\",\"alt\":\"ZK in Reclaim - an approximate explanation\",\"className\":\"rounded\",\"width\":1920,\"height\":1080}],[\"$\",\"div\",null,{\"className\":\"flex gap-2 mb-2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"inline-block text-xs font-medium tracking-wider uppercase mt-5 text-blue-600\",\"suppressHydrationWarning\":true,\"children\":\"Code\"}],[\"$\",\"span\",null,{\"className\":\"inline-block text-xs font-medium tracking-wider uppercase mt-5 text-blue-600\",\"suppressHydrationWarning\":true,\"children\":\"Not Code\"}]]}],[[\"$\",\"p\",null,{\"children\":\"Understanding ZK Proofs is not intuitive. I’ve explained how Reclaim Works to over a dozen people spending several hours each, to distill what actually clicks - so that you don’t have to sit through one of those sessions filled with banging heads on to the table.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":[\"Note, this post deliberately provides incomplete or incorrect information - in the interest of appealing to intuition. For an accurate explanation refer the \",[\"$\",\"a\",null,{\"href\":\"https://docs.reclaimprotocol.org/\",\"children\":\"whitepaper\"}]]}]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"problem\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#problem\",\"children\":\"Problem\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"If we want to ask \",[\"$\",\"em\",null,{\"children\":\"Is the user above 18?\"}],\", in Reclaim it is translated to \",[\"$\",\"em\",null,{\"children\":\"Does the webpage of the govt ID when this user logged in contain the string “Age: 25”?\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Given\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"a website url, U\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"the encrypted html page, E (response to url U)\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"a set of signatures, S\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"the substring to look for, V\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"the decryption key, D\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"We need to prove that\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"When url U is opened, the response is E\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"E when decrypted with decryption key D, generates an intermediate plain text P\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Plain text P has the substring V in it\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"background\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#background\",\"children\":\"Background\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We can prove that opening url U, yields the response E that can be verified to be true using signatures S. You can refer to how that works \",[\"$\",\"a\",null,{\"href\":\"https://blog.reclaimprotocol.org/posts/reclaim-works-on-tls-1-3/\",\"children\":\"here\"}],\". However, understanding how that works is not critical to understanding this post. All that you need to assume for this post is that that (U, E, S) is a public known tuple. We will understand how the ZK Proofs work given this public knowledge.\"]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"naive-proof\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#naive-proof\",\"children\":\"Naive proof\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Ok, now that we know (U, E, S) is immutable how may I prove to you that substring V exists in the encrypted html page E when decrypted with decryption key D?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Let’s say I give you a program \",[\"$\",\"code\",null,{\"children\":\"proof.py\"}],\" with the following contents\"]}],\"\\n\",[\"$\",\"figure\",null,{\"data-rehype-pretty-code-figure\":\"\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"backgroundColor\":\"#24292e\",\"color\":\"#e1e4e8\"},\"tabIndex\":\"0\",\"data-language\":\"py\",\"data-theme\":\"github-dark\",\"children\":[\"$\",\"code\",null,{\"data-language\":\"py\",\"data-theme\":\"github-dark\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"def\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\" verify\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(u, e, s, v, d):\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"  assert\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(correct_response(u,e,s))\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  p \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" decrypt(e, d)\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" v \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"in\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" p\"}]]}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"I will send you this function, and I will send you the parameters to run this function \",[\"$\",\"code\",null,{\"children\":\"U, E, S, V, D\"}],\" You can\"]}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"see the source of the code and be convinced that this is what you want the code to be doing\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"when you run the code with the parameters I sent you, you get a boolean output\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"If the output is \",[\"$\",\"code\",null,{\"children\":\"True\"}],\", you can be convinced that V is a substring of the decryption of E.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"But, this relies on the fact that I reveal to you the decryption key D. Which is highly undesireable. OK, what can we do better? ZK Proofs? Yes, but let’s build to it.\"}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"little-math\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#little-math\",\"children\":\"Little Math?\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"binary-and-polynomials\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#binary-and-polynomials\",\"children\":\"Binary and polynomials\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The program we saw above can be compiled into a binary. That is how it is executed. If it is converted into a binary, means the code turns into a bunch of 1s and 0s - that is, numbers. And numbers can be expressed as an equation or polynomial.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The way to convert this program into polynomials is called QAP and sliding in the assert functions is called R1CS - \",[\"$\",\"a\",null,{\"href\":\"https://electriccoin.co/blog/snark-explain5/\",\"children\":\"if you want to read up more\"}],\". But, jargon aside - programs are nothing but mathematical equations.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This equation will check out, only if the variables U, E, S, V, D are the parameters fed in statically. So, from now on, we’ll refer to the program above as the equation Q.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"modulo-math\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#modulo-math\",\"children\":\"Modulo math\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"a % b\"}],\" is read as \",[\"$\",\"code\",null,{\"children\":\"a mod b\"}],\" represents the remainder when a is divided by b. There exists a problem called the \",[\"$\",\"a\",null,{\"href\":\"https://www.doc.ic.ac.uk/~mrh/330tutor/ch06s02.html\",\"children\":\"Discrete Log Problem\"}],\" in mathematics that says given \",[\"$\",\"code\",null,{\"children\":\"p^q % n\"}],\" it is impossible to find \",[\"$\",\"code\",null,{\"children\":\"p\"}],\" given \",[\"$\",\"code\",null,{\"children\":\"q\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"n\"}],\".\"]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"homomorphic-encryption-ish\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#homomorphic-encryption-ish\",\"children\":\"Homomorphic Encryption-ish\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This section has nothing to do with zk proofs that are used in the Reclaim Protocol. But I use it as a stepping stone to convince you that it is possible for me to prove that I know a D such that U, E, S, V, D satisfy Q; without revealing D to you.\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"if a % n = (b*c) %n\\r\\nalso written as,\\r\\na = b*c % n\\r\\n\\r\\nit is also true that\\r\\na^p = (b*c)^p % n\\r\\n\\r\\nalso,\\r\\na^p = (b^p * c^p) % n\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"See \",[\"$\",\"a\",null,{\"href\":\"https://en.wikipedia.org/wiki/Homomorphic_encryption#Partially_homomorphic_cryptosystems\",\"children\":\"homomorphic encryption\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"In the above equation, i want to prove to you that i know a, b, c such that the equation \",[\"$\",\"code\",null,{\"children\":\"a = b*c %n\"}],\" holds. But I don’t want to reveal c to you. So, what I’ll do is send you \",[\"$\",\"code\",null,{\"children\":\"a, b, cp, p\"}],\" for some number \",[\"$\",\"code\",null,{\"children\":\"p\"}],\". I will compute \",[\"$\",\"code\",null,{\"children\":\"cp\"}],\" to be \",[\"$\",\"code\",null,{\"children\":\"c^p\"}],\". I will send \",[\"$\",\"code\",null,{\"children\":\"cp\"}],\" but never \",[\"$\",\"code\",null,{\"children\":\"c\"}],\" itself.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"What you can do is you can check if\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"a^p = b^p * cp %n\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"If this equation holds, it also means \",[\"$\",\"code\",null,{\"children\":\"a = b*c %n\"}],\" holds. The only way I was able to give you a \",[\"$\",\"code\",null,{\"children\":\"cp\"}],\" that satisfied the equation when you raised \",[\"$\",\"code\",null,{\"children\":\"a\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"b\"}],\" to the power \",[\"$\",\"code\",null,{\"children\":\"p\"}],\" is if I actually knew \",[\"$\",\"code\",null,{\"children\":\"c\"}],\" and raised it to \",[\"$\",\"code\",null,{\"children\":\"p\"}],\" so as to calculate \",[\"$\",\"code\",null,{\"children\":\"cp\"}],\" before sending it to you. As we saw above, because of the discrete log problem, it is impossible for you to derive c from cp.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Yay, so I have proven to you that i know value \",[\"$\",\"code\",null,{\"children\":\"c\"}],\" such that it satisfies equation \",[\"$\",\"code\",null,{\"children\":\"a = b*c % n\"}],\" given a, b, n, without revealing the value of \",[\"$\",\"code\",null,{\"children\":\"c\"}],\" that I know. So, this is a zero knowledge proof. A zero knowledge proof is, there is no information other than what was being tried to be proven. Specifically I prove that I know \",[\"$\",\"code\",null,{\"children\":\"c\"}],\" without revealing the value of `c.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"So, we could use the same method to prove that I know D such that U, E, S, V, D satisfies Q - without revealing D itself. Right? Kinda. But it’d be too impractically expensive to do it this way especially when Q gets very very large for complex programs.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"That’s why we need ZK SNARKs. the S in SNARK stands for succinct. So, it is designed to be cheap to share and verify.\"}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"zk-snarks\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#zk-snarks\",\"children\":\"ZK SNARKS\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"not-yet\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#not-yet\",\"children\":\"Not yet…\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"First we’re going to understad an interactive proof. More math incoming. We have the equation Q and known variables U, E, S, V and an unknown variable D that we want to prove the knowledge of. let us represent that as Q(U, E, S, V, d) or just Q(d) for short.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Q(d) can be written as\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Q(d^2) = A(d^2) + d*B(d^2)\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The only way I can do this is if I know the factorization of Q. The only way for me to know the factorization of Q is if I know \",[\"$\",\"code\",null,{\"children\":\"D\"}],\". So if I can prove to you that I know the correct factorization - of Q, I have indirectly proven to you that I know D.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"I will first commit to the polynomials Q, A, B. A commitment to a polynomial is the merkel root of the evaluation of the polynomial on all possible values of \",[\"$\",\"code\",null,{\"children\":\"d\"}],\". In practice, a \",[\"$\",\"a\",null,{\"href\":\"https://www.iacr.org/archive/asiacrypt2010/6477178/6477178.pdf\",\"children\":\"more efficient commitment scheme\"}],\" is used, but we’ll use this for simplicity. Once i have committed to these polynomials, I can’t go back and change the polynomials to my convenience in the rest of the proof generation.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Once i send you the commitments to Q, A, B ; you will send me a random number \",[\"$\",\"code\",null,{\"children\":\"r\"}],\" I will construct a new equation\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"H(d) = A(d) + r*B(d)\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"I will send you a commitment to this polynomial H back.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Ok, so at this point you have commitments to polynomials Q, A, B, H I have the secret decryption key, or number, D\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Now you will send me 100 random values of \",[\"$\",\"code\",null,{\"children\":\"d\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"I will send you the merkel branches for each of Q, A, B, S when evaluated on these 100 values and 100 more branches for the squares of the values.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"You will check that the merkel branches lead up to the committed merkel root, so I’ve definitely not changed my polynomials.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"You will also check\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Q(x^2) = A(x^2) + x*B(x^2)\\r\\nand\\r\\nH(x) = A(x) + r*B(x)\\r\\n\\r\\nfor each of the 100 selected values of x\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"if this checks out you may have some confidence that I know the the correct factorization. But I might have gotten lucky inspite of me cheating in some way. So you’d tell me to do the entire thing again. But this time, you’d ask me to redo the entire thing, but this time replacing Q(d) with H(d).\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"So now,\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Q'(d^2) = A(d^2) + r*B(d^2)\\r\\nand\\r\\nH'(d) = A(d^2) + r'*r*B(d^2)\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"If you do this enough number of times, the probability of me getting lucky for every set of equations that are randomly generated via the randomly picked \",[\"$\",\"code\",null,{\"children\":\"r\"}],\" is lower and lower. The intuition here for halving the power of \",[\"$\",\"code\",null,{\"children\":\"d\"}],\" in each round is that the total size of the proof is only \",[\"$\",\"code\",null,{\"children\":\"log(degree of Q)\"}],\" in size. Which is what makes it succinct. Ofcourse this is a \",[\"$\",\"a\",null,{\"href\":\"https://vitalik.ca/general/2021/01/26/snarks.html\",\"children\":\"simplified version\"}],\" of the actual protocol which has optimizations.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"non-interactive\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#non-interactive\",\"children\":\"Non interactive\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The above protocol implies that both you and me have to be online at the same time for me to be able to generate the proofs. Because it involves you sending me random numbers and me doing the compute and sending it back. But that isn’t how zk proofs work - how?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The final trick we’re going to use is - called a fiat shamir heuristic. Instead of you picking the random number, I will pick the random number myself. But the way I would do it is just by hashing all the commitments I was making to you. that is, hash of the merkel roots of the polynomial commitments. It is random enough that i can’t predict it before making the commitment, so it is as good as you giving me this random number.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"So, you are not required in the proof generation stage. I will generate all the random numbers and send that across to you. You can then check that I correctly derived the random numbers as per the agreed upon hash function. Along with, ofcourse, the checks you were doing in each round can now be done all at once on your end!\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"That is, you can verify the proof I’ve sent you. If the proof checks out, you’ll know that I know the factorization of Q which then implies that I know the value D that satisfied the equation and thus the computer program Q represents.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"is-this-secure\",\"children\":[\"$\",\"a\",null,{\"className\":\"subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#is-this-secure\",\"children\":\"Is this secure?\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Remember, (U, E, S) is immutable because of the way in which the request is made. Which leaves me with only 2 variables to play with. \",[\"$\",\"code\",null,{\"children\":\"V\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"D\"}],\". Let’s say I want to create a zk proof for \",[\"$\",\"code\",null,{\"children\":\"V'\"}],\" instead. That would mean, (U, E, S, V’) become fixed and the only free variable is \",[\"$\",\"code\",null,{\"children\":\"D\"}],\". So I now need to find a \",[\"$\",\"code\",null,{\"children\":\"D'\"}],\" such that it still satisfies the equation \",[\"$\",\"code\",null,{\"children\":\"Q\"}],\". And that, is impossible because the only way is to try all the possible values of D, which is 2^64 values. It’ll take millions of years to try out all the values of D on the most powerful computer to find a value of D so that it checks out for the particular \",[\"$\",\"code\",null,{\"children\":\"V'\"}],\" you want to prove.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Phew.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"em\",null,{\"children\":\"Reminder, this post is grossly inaccurate in terms of what actually happens. It is meant only to appeal to intuition.\"}]}]]]}]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: light)\",\"content\":\"white\"}],[\"$\",\"meta\",\"2\",{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: dark)\",\"content\":\"black\"}],[\"$\",\"meta\",\"3\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"4\",{\"children\":\"ZK in Reclaim - an approximate explanation | Reclaim Protocol\"}],[\"$\",\"meta\",\"5\",{\"name\":\"description\",\"content\":\"Understanding ZK Proofs is not intuitive.\"}],[\"$\",\"meta\",\"6\",{\"name\":\"author\",\"content\":\"hexclanlabs\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:title\",\"content\":\"ZK in Reclaim - an approximate explanation\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:description\",\"content\":\"Understanding ZK Proofs is not intuitive.\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:url\",\"content\":\"https://example.com/posts/zk-in-reclaim\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:image\",\"content\":\"https://example.com/api/og?title=ZK+in+Reclaim+-+an+approximate+explanation\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:image:alt\",\"content\":\"ZK in Reclaim - an approximate explanation\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:title\",\"content\":\"ZK in Reclaim - an approximate explanation\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:description\",\"content\":\"Understanding ZK Proofs is not intuitive.\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:image\",\"content\":\"https://example.com/api/og?title=ZK+in+Reclaim+-+an+approximate+explanation\"}],[\"$\",\"link\",\"19\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"20\",{\"name\":\"next-size-adjust\"}]]\n7:null\n"])</script></body></html>